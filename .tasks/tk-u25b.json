{
  "project": "tk",
  "ref": "u25b",
  "title": "[BUG] Error messages not visible until terminal resize",
  "description": "Errors in chat history don't appear until terminal is resized. Likely render state issue - errors not triggering repaint or being buffered incorrectly.",
  "status": "done",
  "priority": 2,
  "labels": [],
  "assignees": [],
  "parent": null,
  "blocked_by": [],
  "estimate": null,
  "due_date": null,
  "logs": [
    {
      "ts": "2026-01-30T18:28:32.644Z",
      "msg": "User confirms bug still exists - errors not visible until terminal resize. Priority for next session."
    },
    {
      "ts": "2026-01-30T18:33:06.316Z",
      "msg": "Root cause: In row-tracking mode, draw_direct() cleared from min(old_ui_start, new_ui_start) downwards. When chat was printed, chat_row advanced, making new_ui_start higher. The clear then wiped the freshly-printed chat. Fix: In row-tracking mode, only clear from ui_start (not old values) to preserve chat content above UI."
    },
    {
      "ts": "2026-01-30T21:15:37.243Z",
      "msg": "Additional fix: Reset last_ui_start when transitioning from row-tracking to scroll mode in main.rs overflow handling. Without this, stale ui_start values could cause the scroll mode clearing to wipe freshly-printed content."
    },
    {
      "ts": "2026-01-30T21:58:52.184Z",
      "msg": "Additional fixes from thorough review: 1) Added last_ui_start and last_render_width reset to reset_for_session_load() to prevent stale values after session load. 2) Refactored clear_from calculation for clarity - explicitly capture old_ui_start before updating."
    }
  ],
  "created_at": "2026-01-30T06:07:06.407Z",
  "updated_at": "2026-01-30T21:58:52.184Z",
  "completed_at": "2026-01-30T18:33:21.871Z",
  "external": {}
}