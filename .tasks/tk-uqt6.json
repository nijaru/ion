{
  "project": "tk",
  "ref": "uqt6",
  "title": "[FEATURE] OAuth subscription support - ChatGPT Plus/Pro, Google AI",
  "description": "Use consumer subscriptions instead of API credits. See ai/design/oauth-subscriptions.md",
  "status": "open",
  "priority": 1,
  "labels": [],
  "assignees": [],
  "parent": null,
  "blocked_by": [],
  "estimate": null,
  "due_date": null,
  "logs": [
    {
      "ts": "2026-01-30T04:17:06.963Z",
      "msg": "Implementation complete. All components done: PKCE flow, callback server, token storage, ChatGpt OAuth (ion login chatgpt), Gemini OAuth (ion login gemini), CLI commands, TUI integration. Awaiting real-world testing with subscriptions. Client IDs are from Codex CLI and Gemini CLI (public installed-app credentials)."
    },
    {
      "ts": "2026-01-30T18:30:09.727Z",
      "msg": "ChatGPT OAuth working end-to-end. Gemini OAuth login works but API calls return 403 - Code Assist API may need different approach"
    },
    {
      "ts": "2026-02-04T05:17:39.413Z",
      "msg": "ChatGPT OAuth now uses chatgpt.com/backend-api/codex endpoint instead of api.openai.com. Found from Codex source: model_provider_info.rs shows AuthMode::Chatgpt uses this URL. May need Responses API format (/responses) instead of Chat Completions - Codex uses that format. Also may need ChatGPT-Account-ID header."
    },
    {
      "ts": "2026-02-04T05:37:57.269Z",
      "msg": "Added Codex OAuth authorize params and ChatGPT-Account-ID handling. OAuthTokens now stores chatgpt_account_id; client injects ChatGPT-Account-ID header when available."
    },
    {
      "ts": "2026-02-04T06:07:57.586Z",
      "msg": "Switched ChatGPT provider to new Responses API client. Uses /responses with fallback between /backend-api/codex and /backend-api/codex/v1, builds Responses-style payload, and parses Responses SSE events."
    },
    {
      "ts": "2026-02-04T17:52:36.355Z",
      "msg": "ChatGPT Responses payload now sets store=false to satisfy backend (400 'Store must be set to false')."
    },
    {
      "ts": "2026-02-04T17:59:01.145Z",
      "msg": "User sees 400 invalid_type for input[n].output (expected string/array, got object) after rebuild. Fix: send function_call_output output as string, not object payload. Requires rebuild."
    }
  ],
  "created_at": "2026-01-30T03:12:43.012Z",
  "updated_at": "2026-02-04T17:59:01.145Z",
  "completed_at": null,
  "external": {}
}