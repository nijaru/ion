{
  "project": "tk",
  "ref": "wr9i",
  "title": "[ARCH] Add genai provider adapter behind feature flag",
  "description": "Implement optional genai-backed provider adapter for API-key providers, preserving ion canonical message/tool model and keeping existing custom provider path for OAuth/OpenRouter quirks until parity is validated.",
  "status": "open",
  "priority": 4,
  "labels": [],
  "assignees": [],
  "parent": null,
  "blocked_by": [],
  "estimate": null,
  "due_date": null,
  "logs": [
    {
      "ts": "2026-02-11T23:33:52.046Z",
      "msg": "Planning context captured in ai/design/runtime-stack-integration-plan-2026-02.md. genai adapter should be feature-gated and limited to API-key providers initially."
    },
    {
      "ts": "2026-02-12T00:24:44.764Z",
      "msg": "2026-02-11 review: Decision is skip genai for now. Custom provider layer is well-structured (~8.9K LOC), bugs are in provider quirks genai doesn't handle. genai v0.5.3 now has tool call streaming but can't replace Anthropic cache_control, OAuth providers, or quirks. Adding genai would create two code paths. Only worth revisiting if rapidly adding many new providers. See ai/research/provider-crates-2026-02.md."
    }
  ],
  "created_at": "2026-02-11T23:32:50.940Z",
  "updated_at": "2026-02-12T00:24:50.214Z",
  "completed_at": null,
  "external": {}
}